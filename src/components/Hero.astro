---
import { getTranslations, type Locale } from '../i18n/translations';
import appIcon from '../../public/images/app-icon.png';

interface Props {
  locale: Locale;
}

const { locale } = Astro.props;
const t = getTranslations(locale);
---

<section class="relative overflow-hidden py-20 sm:py-32">
  <!-- Background gradient -->
  <div class="absolute inset-0 bg-gradient-to-b from-[var(--color-primary)]/10 to-transparent pointer-events-none" aria-hidden="true"></div>

  <div class="relative max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center">
      <!-- Badge -->
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[var(--color-bg-card)] border border-[var(--color-border)] text-sm text-[var(--color-text-secondary)] mb-8">
        <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse" aria-hidden="true"></span>
        macOS 13.0+
      </div>

      <!-- Headline -->
      <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-[var(--color-text-primary)] mb-6 tracking-tight">
        {t.hero.tagline}
      </h1>

      <!-- Description -->
      <p class="max-w-2xl mx-auto text-lg sm:text-xl text-[var(--color-text-secondary)] mb-10">
        {t.hero.description}
      </p>

      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <!-- App Store Button -->
        <a
          href="https://apps.apple.com/fr/app/framepickerbykriss/id6756105530?mt=12"
          target="_blank"
          rel="noopener noreferrer"
          aria-label={t.hero.downloadButton}
        >
          <img
            src="https://tools.applemediaservices.com/api/badges/download-on-the-mac-app-store/black/en-us?size=250x83&releaseDate=1728691200"
            alt="Download on the Mac App Store"
            class="h-14 hover:opacity-80 transition-opacity"
          />
        </a>
      </div>

      <!-- App Screenshots -->
      <div class="mt-16 relative">
        <div class="absolute inset-0 bg-gradient-to-t from-[var(--color-bg-dark)] via-transparent to-transparent z-10 pointer-events-none" aria-hidden="true"></div>
        <div class="relative mx-auto max-w-4xl rounded-xl overflow-hidden border border-[var(--color-border)] bg-[var(--color-bg-card)] shadow-2xl">
          <div class="screenshot-carousel">
            <img src="/images/screenshots/screenshot-1.png" alt="Frame Picker By Kriss - Screenshot 1" class="screenshot-slide" />
            <img src="/images/screenshots/screenshot-2.jpg" alt="Frame Picker By Kriss - Screenshot 2" class="screenshot-slide opacity-0" />
            <img src="/images/screenshots/screenshot-3.jpg" alt="Frame Picker By Kriss - Screenshot 3" class="screenshot-slide opacity-0" />
            <img src="/images/screenshots/screenshot-4.jpg" alt="Frame Picker By Kriss - Screenshot 4" class="screenshot-slide opacity-0" />

            <!-- Navigation dots -->
            <div class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-20">
              <button class="carousel-dot w-2 h-2 rounded-full bg-white/80 transition-all" data-index="0" aria-label="Screenshot 1"></button>
              <button class="carousel-dot w-2 h-2 rounded-full bg-white/40 hover:bg-white/60 transition-all" data-index="1" aria-label="Screenshot 2"></button>
              <button class="carousel-dot w-2 h-2 rounded-full bg-white/40 hover:bg-white/60 transition-all" data-index="2" aria-label="Screenshot 3"></button>
              <button class="carousel-dot w-2 h-2 rounded-full bg-white/40 hover:bg-white/60 transition-all" data-index="3" aria-label="Screenshot 4"></button>
            </div>
          </div>
        </div>
      </div>

      <script>
        const slides = document.querySelectorAll('.screenshot-slide');
        const dots = document.querySelectorAll('.carousel-dot');
        let currentIndex = 0;

        function showSlide(index: number) {
          slides.forEach((slide, i) => {
            slide.classList.toggle('opacity-0', i !== index);
          });
          dots.forEach((dot, i) => {
            dot.classList.toggle('bg-white/80', i === index);
            dot.classList.toggle('bg-white/40', i !== index);
          });
          currentIndex = index;
        }

        dots.forEach(dot => {
          dot.addEventListener('click', () => {
            const index = parseInt(dot.getAttribute('data-index') || '0');
            showSlide(index);
          });
        });

        // Auto-advance every 4 seconds
        setInterval(() => {
          showSlide((currentIndex + 1) % slides.length);
        }, 4000);
      </script>
    </div>
  </div>
</section>

<style>
  .screenshot-carousel {
    position: relative;
    aspect-ratio: 8 / 7;
    overflow: hidden;
  }

  .screenshot-slide {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: opacity 0.5s ease;
  }
</style>
